<!DOCTYPE html><html lang=en-GB><meta charset=utf-8><title>Close on select option</title><meta name=viewport content="width=device-width, initial-scale=1"><link rel=stylesheet href=/react-combo-boxes/examples.db2d6d1e.css><nav><div>React combo boxes</div><details><summary>Select</summary><a href=/react-combo-boxes/select.html>About</a><a href=/react-combo-boxes/select/string_options/index.html>String options</a><a href=/react-combo-boxes/select/object_options/index.html>Object options</a><a href=/react-combo-boxes/select/placeholder_option/index.html>Placeholder option</a><a href=/react-combo-boxes/select/disabled_option/index.html>Disabled option</a><a href=/react-combo-boxes/select/grouped_options/index.html>Grouped options</a><a href=/react-combo-boxes/select/mapped_options/index.html>Mapped options</a><a href=/react-combo-boxes/select/html_options/index.html>HTML options</a><a href=/react-combo-boxes/select/very_long_option/index.html>Very long option</a><a href=/react-combo-boxes/select/large_number_of_options/index.html>Large number of options</a><a href=/react-combo-boxes/select/id_options/index.html>Options with an number id</a><a href=/react-combo-boxes/select/multiple/index.html>Multiple options</a><a href=/react-combo-boxes/select/multiple_with_disabled/index.html>Multiple options with disabled</a></details><details><summary>Combo box</summary><a href=/react-combo-boxes/combo_box.html>About</a><a href=/react-combo-boxes/combo_box/string_options/index.html>String options</a><a href=/react-combo-boxes/combo_box/object_options/index.html>Object options</a><a href=/react-combo-boxes/combo_box/disabled_option/index.html>Disabled option</a><a href=/react-combo-boxes/combo_box/grouped_options/index.html>Grouped options</a><a href=/react-combo-boxes/combo_box/html_options/index.html>HTML options</a><a href=/react-combo-boxes/combo_box/mapped_options/index.html>Mapped options</a><a href=/react-combo-boxes/combo_box/without_autocomplete/index.html>Without autocomplete</a><a href=/react-combo-boxes/combo_box/inline_autocomplete/index.html>With inline autocomplete</a><a href=/react-combo-boxes/combo_box/aria_1_0/index.html>ARIA 1.0</a><a href=/react-combo-boxes/combo_box/aria_1_1/index.html>ARIA 1.1</a><a href=/react-combo-boxes/combo_box/aria_1_2_groups/index.html>ARIA 1.2 groups</a><a href=/react-combo-boxes/combo_box/listbox_footer/index.html>Listbox footer</a><a href=/react-combo-boxes/combo_box/tab_select/index.html>Tab select</a><a href=/react-combo-boxes/combo_box/layout_listbox/index.html>Layout listbox</a><a href=/react-combo-boxes/combo_box/contain_listbox/index.html>Contain listbox</a><a href=/react-combo-boxes/combo_box/popover/index.html>Popover</a><details><summary>Searches</summary><a href=/react-combo-boxes/searchers.html>About</a><a href=/react-combo-boxes/combo_box/fetch/index.html>Fetch search</a><a href=/react-combo-boxes/combo_box/async_search/index.html>Async search</a><a href=/react-combo-boxes/combo_box/search_suggestions/index.html>Search suggestions</a><a href=/react-combo-boxes/combo_box/background_autocomplete/index.html>With background autocomplete</a><a>Close on select</a><a href=/react-combo-boxes/combo_box/clear_on_select/index.html>Clear on select</a></details><details><summary>Edge cases</summary><a href=/react-combo-boxes/combo_box/identical_options/index.html>Identical options</a><a href=/react-combo-boxes/combo_box/blank_option/index.html>Blank option</a><a href=/react-combo-boxes/combo_box/all_disabled_options/index.html>All disabled options</a><a href=/react-combo-boxes/combo_box/autoselect_disabled_option/index.html>Disabled option and autoselect</a><a href=/react-combo-boxes/combo_box/search_min_length/index.html>Search min length</a><a href=/react-combo-boxes/combo_box/very_long_option/index.html>Very long option</a><a href=/react-combo-boxes/combo_box/disabled/index.html>Disabled</a><a href=/react-combo-boxes/combo_box/read_only/index.html>Read only</a></details><details><summary>Combo box table</summary><a href=/react-combo-boxes/combo_box_table.html>About</a><a href=/react-combo-boxes/combo_box_table/combo_box/index.html>Table</a><a href=/react-combo-boxes/combo_box_table/combo_box_headers/index.html>With headers</a><a href=/react-combo-boxes/combo_box_table/combo_box_grouped/index.html>Grouped</a><a href=/react-combo-boxes/combo_box_table/combo_box_grouped_headers/index.html>Grouped with headers</a><a href=/react-combo-boxes/combo_box_table/combo_box_column_width/index.html>Column width adjustment</a></details><details><summary>Highlighters</summary><a href=/react-combo-boxes/highlighters.html>About</a><a href=/react-combo-boxes/highlighters/token/index.html>Token</a><a href=/react-combo-boxes/highlighters/prefix/index.html>Prefix</a><a href=/react-combo-boxes/highlighters/substring/index.html>Substring</a><a href=/react-combo-boxes/highlighters/delimited/index.html>Delimited</a></details></details><details><summary>Drop down</summary><a href=/react-combo-boxes/drop_down.html>About</a><a href=/react-combo-boxes/drop_down/string_options/index.html>String options</a><a href=/react-combo-boxes/drop_down/object_options/index.html>Object options</a><a href=/react-combo-boxes/drop_down/placeholder_option/index.html>Placeholder option</a><a href=/react-combo-boxes/drop_down/disabled_option/index.html>Disabled option</a><a href=/react-combo-boxes/drop_down/disabled/index.html>Disabled drop down</a><a href=/react-combo-boxes/drop_down/grouped_options/index.html>Grouped options</a><a href=/react-combo-boxes/drop_down/html_options/index.html>HTML options</a><a href=/react-combo-boxes/drop_down/mapped_options/index.html>Mapped options</a><a href=/react-combo-boxes/drop_down/aria_1_2_groups/index.html>With ARIA 1.2 groups</a><details><summary>Edge cases</summary><a href=/react-combo-boxes/drop_down/identical_options/index.html>Identical options</a><a href=/react-combo-boxes/drop_down/blank_option/index.html>Blank option</a><a href=/react-combo-boxes/drop_down/no_options/index.html>No options</a><a href=/react-combo-boxes/drop_down/all_disabled_options/index.html>All disabled options</a><a href=/react-combo-boxes/drop_down/very_long_option/index.html>Very long option</a></details><details><summary>Drop down table</summary><a href=/react-combo-boxes/drop_down_table.html>About</a><a href=/react-combo-boxes/drop_down_table/drop_down/index.html>Table</a><a href=/react-combo-boxes/drop_down_table/drop_down_headers/index.html>With headers</a><a href=/react-combo-boxes/drop_down_table/drop_down_grouped/index.html>Grouped</a><a href=/react-combo-boxes/drop_down_table/drop_down_grouped_headers/index.html>With headers and grouped</a></details></details><details><summary>Radios</summary><a href=/react-combo-boxes/radios.html>About</a><a href=/react-combo-boxes/radios/string_options/index.html>String options</a><a href=/react-combo-boxes/radios/object_options/index.html>Object options</a><a href=/react-combo-boxes/radios/disabled_option/index.html>Disabled option</a><a href=/react-combo-boxes/radios/with_description/index.html>With a description</a><a href=/react-combo-boxes/radios/grouped_options/index.html>Grouped options</a></details><details><summary>Checkboxes</summary><a href=/react-combo-boxes/checkboxes.html>About</a><a href=/react-combo-boxes/checkboxes/string_options/index.html>String options</a><a href=/react-combo-boxes/checkboxes/object_options/index.html>Object options</a><a href=/react-combo-boxes/checkboxes/disabled_option/index.html>Disabled option</a><a href=/react-combo-boxes/checkboxes/with_description/index.html>With a description</a><a href=/react-combo-boxes/checkboxes/grouped_options/index.html>Grouped options</a></details><a href=/react-combo-boxes/datalist/index.html>Datalist</a><a href=/react-combo-boxes/test_helper.html>Test helper</a><a href=/react-combo-boxes/accessibility.html>Accessibility</a></nav><script src=/react-combo-boxes/examples.67c8d07c.js></script><main><h1>Close on select option</h1>
<p>Example of <code>closeOnSelect</code> being set to false.</p>
<p>If a region such as "North America" new options are display.</p>
<div data-react-example=combo_box/close_on_select></div><pre class=language-js><code class=language-js><span class="keyword token">import</span> <span class="punctuation token">{</span> useEffect<span class="punctuation token">,</span> useState <span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'react'</span><span class="punctuation token">;</span>
<span class="keyword token">import</span> <span class="punctuation token">{</span> ComboBox<span class="punctuation token">,</span> tokenSearcher <span class="punctuation token">}</span> <span class="keyword token">from</span> <span class="string token">'@citizensadvice/react-combo-boxes'</span><span class="punctuation token">;</span>
<span class="keyword token">import</span> countries <span class="keyword token">from</span> <span class="string token">'../../data/countries.json'</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> regions <span class="operator token">=</span> countries
  <span class="punctuation token">.</span><span class="function token">map</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token"><span class="punctuation token">{</span> region <span class="punctuation token">}</span></span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">(</span><span class="punctuation token">{</span> <span class="literal-property property token">name</span><span class="operator token">:</span> region<span class="punctuation token">,</span> <span class="literal-property property token">isRegion</span><span class="operator token">:</span> <span class="boolean token">true</span> <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">)</span>
  <span class="punctuation token">.</span><span class="function token">filter</span><span class="punctuation token">(</span>
    <span class="punctuation token">(</span><span class="parameter token">item<span class="punctuation token">,</span> i<span class="punctuation token">,</span> ar</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span>
      item<span class="punctuation token">.</span>name <span class="operator token">&amp;&amp;</span> ar<span class="punctuation token">.</span><span class="function token">findIndex</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">sub</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> sub<span class="punctuation token">.</span>name <span class="operator token">===</span> item<span class="punctuation token">.</span>name<span class="punctuation token">)</span> <span class="operator token">===</span> i<span class="punctuation token">,</span>
  <span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> countriesAndRegions <span class="operator token">=</span> <span class="punctuation token">[</span><span class="operator token">...</span>countries<span class="punctuation token">,</span> <span class="operator token">...</span>regions<span class="punctuation token">]</span><span class="punctuation token">.</span><span class="function token">sort</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">a<span class="punctuation token">,</span> b</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span>
  a<span class="punctuation token">.</span>name<span class="punctuation token">.</span><span class="function token">localeCompare</span><span class="punctuation token">(</span>b<span class="punctuation token">.</span>name<span class="punctuation token">)</span><span class="punctuation token">,</span>
<span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">function</span> <span class="function token">mapOption</span><span class="punctuation token">(</span><span class="parameter token"><span class="punctuation token">{</span> name <span class="punctuation token">}</span></span><span class="punctuation token">)</span> <span class="punctuation token">{</span>
  <span class="keyword token">return</span> name<span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="keyword token">const</span> tokenSearch <span class="operator token">=</span> <span class="function token">tokenSearcher</span><span class="punctuation token">(</span>countriesAndRegions<span class="punctuation token">,</span> <span class="punctuation token">{</span> <span class="literal-property property token">index</span><span class="operator token">:</span> mapOption <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">function</span> <span class="function token">searcher</span><span class="punctuation token">(</span><span class="parameter token">query<span class="punctuation token">,</span> value</span><span class="punctuation token">)</span> <span class="punctuation token">{</span>
  <span class="keyword token">if</span> <span class="punctuation token">(</span>value<span class="operator token">?.</span>isRegion <span class="operator token">&amp;&amp;</span> value<span class="operator token">?.</span>name <span class="operator token">===</span> query<span class="punctuation token">)</span> <span class="punctuation token">{</span>
    <span class="keyword token">return</span> countries<span class="punctuation token">.</span><span class="function token">filter</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">c</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> c<span class="punctuation token">.</span>region <span class="operator token">===</span> value<span class="operator token">?.</span>name<span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="punctuation token">}</span>
  <span class="keyword token">return</span> <span class="function token">tokenSearch</span><span class="punctuation token">(</span>query<span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="keyword token">function</span> <span class="function token">useDelaySearch</span><span class="punctuation token">(</span><span class="parameter token">search<span class="punctuation token">,</span> value</span><span class="punctuation token">)</span> <span class="punctuation token">{</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>results<span class="punctuation token">,</span> setResults<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="keyword token">null</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>busy<span class="punctuation token">,</span> setBusy<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="boolean token">false</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

  <span class="function token">useEffect</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">{</span>
    <span class="keyword token">const</span> controller <span class="operator token">=</span> <span class="keyword token">new</span> <span class="class-name token">AbortController</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
    <span class="keyword token">const</span> <span class="function function-variable token">run</span> <span class="operator token">=</span> <span class="keyword token">async</span> <span class="punctuation token">(</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">{</span>
      <span class="keyword token">await</span> <span class="keyword token">new</span> <span class="class-name token">Promise</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">resolve</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">{</span>
        <span class="function token">setTimeout</span><span class="punctuation token">(</span>resolve<span class="punctuation token">,</span> <span class="number token">200</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="function token">setBusy</span><span class="punctuation token">(</span><span class="boolean token">true</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="keyword token">await</span> <span class="keyword token">new</span> <span class="class-name token">Promise</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">resolve</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">{</span>
        <span class="function token">setTimeout</span><span class="punctuation token">(</span>resolve<span class="punctuation token">,</span> <span class="number token">2000</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="keyword token">if</span> <span class="punctuation token">(</span><span class="operator token">!</span>controller<span class="punctuation token">.</span>signal<span class="punctuation token">.</span>aborted<span class="punctuation token">)</span> <span class="punctuation token">{</span>
        <span class="function token">setResults</span><span class="punctuation token">(</span><span class="function token">searcher</span><span class="punctuation token">(</span>search<span class="punctuation token">,</span> value<span class="punctuation token">)</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
        <span class="function token">setBusy</span><span class="punctuation token">(</span><span class="boolean token">false</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
      <span class="punctuation token">}</span>
    <span class="punctuation token">}</span><span class="punctuation token">;</span>
    <span class="function token">run</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
    <span class="keyword token">return</span> <span class="punctuation token">(</span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> controller<span class="punctuation token">.</span><span class="function token">abort</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="punctuation token">}</span><span class="punctuation token">,</span> <span class="punctuation token">[</span>search<span class="punctuation token">,</span> value<span class="punctuation token">]</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

  <span class="keyword token">return</span> <span class="punctuation token">[</span>results<span class="punctuation token">,</span> busy<span class="punctuation token">]</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>

<span class="keyword token">export</span> <span class="keyword token">function</span> <span class="function token">Example</span><span class="punctuation token">(</span><span class="punctuation token">)</span> <span class="punctuation token">{</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>value<span class="punctuation token">,</span> setValue<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="keyword token">null</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>search<span class="punctuation token">,</span> setSearch<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="keyword token">null</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>closeOnSelect<span class="punctuation token">,</span> setCloseOnSelect<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="boolean token">false</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">const</span> <span class="punctuation token">[</span>filteredOptions<span class="punctuation token">,</span> busy<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useDelaySearch</span><span class="punctuation token">(</span>search<span class="punctuation token">,</span> value<span class="punctuation token">)</span><span class="punctuation token">;</span>

  <span class="keyword token">return</span> <span class="punctuation token">(</span>
    <span class="operator token">&lt;</span><span class="operator token">&gt;</span>
      <span class="operator token">&lt;</span>label
        id<span class="operator token">=</span><span class="string token">"select-label"</span>
        htmlFor<span class="operator token">=</span><span class="string token">"select"</span>
      <span class="operator token">&gt;</span>
        Select
      <span class="operator token">&lt;</span><span class="operator token">/</span>label<span class="operator token">&gt;</span>
      <span class="operator token">&lt;</span>ComboBox
        id<span class="operator token">=</span><span class="string token">"select"</span>
        aria<span class="operator token">-</span>labelledby<span class="operator token">=</span><span class="string token">"select-label"</span>
        value<span class="operator token">=</span><span class="punctuation token">{</span>value<span class="punctuation token">}</span>
        onValue<span class="operator token">=</span><span class="punctuation token">{</span>setValue<span class="punctuation token">}</span>
        onSearch<span class="operator token">=</span><span class="punctuation token">{</span>setSearch<span class="punctuation token">}</span>
        options<span class="operator token">=</span><span class="punctuation token">{</span>filteredOptions<span class="punctuation token">}</span>
        mapOption<span class="operator token">=</span><span class="punctuation token">{</span>mapOption<span class="punctuation token">}</span>
        closeOnSelect<span class="operator token">=</span><span class="punctuation token">{</span>closeOnSelect<span class="punctuation token">}</span>
        busy<span class="operator token">=</span><span class="punctuation token">{</span>busy<span class="punctuation token">}</span>
      <span class="operator token">/</span><span class="operator token">&gt;</span>

      <span class="operator token">&lt;</span>label<span class="operator token">&gt;</span>
        <span class="operator token">&lt;</span>input
          type<span class="operator token">=</span><span class="string token">"checkbox"</span>
          checked<span class="operator token">=</span><span class="punctuation token">{</span>closeOnSelect<span class="punctuation token">}</span>
          onChange<span class="operator token">=</span><span class="punctuation token">{</span><span class="punctuation token">(</span><span class="parameter token"><span class="punctuation token">{</span> <span class="literal-property property token">target</span><span class="operator token">:</span> <span class="punctuation token">{</span> checked <span class="punctuation token">}</span> <span class="punctuation token">}</span></span><span class="punctuation token">)</span> <span class="operator token">=&gt;</span> <span class="punctuation token">{</span>
            <span class="function token">setCloseOnSelect</span><span class="punctuation token">(</span>checked<span class="punctuation token">)</span><span class="punctuation token">;</span>
          <span class="punctuation token">}</span><span class="punctuation token">}</span>
        <span class="operator token">/</span><span class="operator token">&gt;</span><span class="punctuation token">{</span><span class="string token">' '</span><span class="punctuation token">}</span>
        <span class="operator token">&lt;</span>code<span class="operator token">&gt;</span>closeOnSelect<span class="operator token">&lt;</span><span class="operator token">/</span>code<span class="operator token">&gt;</span>
      <span class="operator token">&lt;</span><span class="operator token">/</span>label<span class="operator token">&gt;</span>

      <span class="operator token">&lt;</span>label htmlFor<span class="operator token">=</span><span class="string token">"output"</span><span class="operator token">&gt;</span>Current value<span class="operator token">&lt;</span><span class="operator token">/</span>label<span class="operator token">&gt;</span>
      <span class="operator token">&lt;</span>output
        htmlFor<span class="operator token">=</span><span class="string token">"select"</span>
        id<span class="operator token">=</span><span class="string token">"output"</span>
      <span class="operator token">&gt;</span>
        <span class="punctuation token">{</span><span class="constant token">JSON</span><span class="punctuation token">.</span><span class="function token">stringify</span><span class="punctuation token">(</span>value<span class="punctuation token">,</span> <span class="keyword token">undefined</span><span class="punctuation token">,</span> <span class="string token">' '</span><span class="punctuation token">)</span><span class="punctuation token">}</span>
      <span class="operator token">&lt;</span><span class="operator token">/</span>output<span class="operator token">&gt;</span>
    <span class="operator token">&lt;</span><span class="operator token">/</span><span class="operator token">&gt;</span>
  <span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span>
</code></pre></main><footer><p>Version: 4.0.0-rc.1</footer><script src=/react-combo-boxes/examples.cd632b85.js type=module></script>