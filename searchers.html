<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Searchers</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/react-combo-boxes/index.4c8a1619.css"></head><body><nav><div>React combo boxes</div><details><summary>Select</summary><a href="/react-combo-boxes/select.html">About</a><a href="/react-combo-boxes/select/string_options/index.html">String options</a><a href="/react-combo-boxes/select/object_options/index.html">Object options</a><a href="/react-combo-boxes/select/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/select/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/select/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/select/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/select/html_options/index.html">HTML options</a><a href="/react-combo-boxes/select/very_long_option/index.html">Very long option</a><a href="/react-combo-boxes/select/large_number_of_options/index.html">Large number of options</a><a href="/react-combo-boxes/select/id_options/index.html">Options with an number id</a><a href="/react-combo-boxes/select/multiple/index.html">Multiple options</a><a href="/react-combo-boxes/select/multiple_with_disabled/index.html">Multiple options with disabled</a></details><details><summary>Combo box</summary><a href="/react-combo-boxes/combo_box.html">About</a><a href="/react-combo-boxes/combo_box/string_options/index.html">String options</a><a href="/react-combo-boxes/combo_box/object_options/index.html">Object options</a><a href="/react-combo-boxes/combo_box/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/combo_box/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/combo_box/html_options/index.html">HTML options</a><a href="/react-combo-boxes/combo_box/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/combo_box/without_autocomplete/index.html">Without autocomplete</a><a href="/react-combo-boxes/combo_box/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/combo_box/inline_autocomplete/index.html">With inline autocomplete</a><a href="/react-combo-boxes/combo_box/aria_1_1/index.html">ARIA 1.1</a><a href="/react-combo-boxes/combo_box/aria_1_2/index.html">ARIA 1.2</a><a href="/react-combo-boxes/combo_box/aria_1_2_groups/index.html">ARIA 1.2 groups</a><a href="/react-combo-boxes/combo_box/listbox_footer/index.html">Listbox footer</a><a href="/react-combo-boxes/combo_box/tab_select/index.html">Tab select</a><a href="/react-combo-boxes/combo_box/layout_listbox/index.html">Layout listbox</a><a href="/react-combo-boxes/combo_box/contain_listbox/index.html">Contain listbox</a><a href="/react-combo-boxes/combo_box/popover/index.html">Popover</a><details><summary>Searches</summary><a>About</a><a href="/react-combo-boxes/combo_box/fetch/index.html">Fetch search</a><a href="/react-combo-boxes/combo_box/async_search/index.html">Async search</a><a href="/react-combo-boxes/combo_box/search_suggestions/index.html">Search suggestions</a><a href="/react-combo-boxes/combo_box/background_autocomplete/index.html">With background autocomplete</a><a href="/react-combo-boxes/combo_box/close_on_select/index.html">Close on select</a><a href="/react-combo-boxes/combo_box/clear_on_select/index.html">Clear on select</a></details><details><summary>Edge cases</summary><a href="/react-combo-boxes/combo_box/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/combo_box/blank_option/index.html">Blank option</a><a href="/react-combo-boxes/combo_box/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/combo_box/autoselect_disabled_option/index.html">Disabled option and autoselect</a><a href="/react-combo-boxes/combo_box/search_min_length/index.html">Search min length</a><a href="/react-combo-boxes/combo_box/very_long_option/index.html">Very long option</a><a href="/react-combo-boxes/combo_box/disabled/index.html">Disabled</a><a href="/react-combo-boxes/combo_box/read_only/index.html">Read only</a></details><details><summary>Combo box table</summary><a href="/react-combo-boxes/combo_box_table.html">About</a><a href="/react-combo-boxes/combo_box_table/combo_box/index.html">Table</a><a href="/react-combo-boxes/combo_box_table/combo_box_headers/index.html">With headers</a><a href="/react-combo-boxes/combo_box_table/combo_box_grouped/index.html">Grouped</a><a href="/react-combo-boxes/combo_box_table/combo_box_grouped_headers/index.html">Grouped with headers</a><a href="/react-combo-boxes/combo_box_table/combo_box_column_width/index.html">Column width adjustment</a></details><details><summary>Highlighters</summary><a href="/react-combo-boxes/highlighters.html">About</a><a href="/react-combo-boxes/highlighters/token/index.html">Token</a><a href="/react-combo-boxes/highlighters/prefix/index.html">Prefix</a><a href="/react-combo-boxes/highlighters/substring/index.html">Substring</a><a href="/react-combo-boxes/highlighters/delimited/index.html">Delimited</a></details></details><details><summary>Drop down</summary><a href="/react-combo-boxes/drop_down.html">About</a><a href="/react-combo-boxes/drop_down/string_options/index.html">String options</a><a href="/react-combo-boxes/drop_down/object_options/index.html">Object options</a><a href="/react-combo-boxes/drop_down/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/drop_down/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/drop_down/disabled/index.html">Disabled drop down</a><a href="/react-combo-boxes/drop_down/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/drop_down/html_options/index.html">HTML options</a><a href="/react-combo-boxes/drop_down/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/drop_down/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/drop_down/aria_1_2_groups/index.html">With ARIA 1.2 groups</a><details><summary>Edge cases</summary><a href="/react-combo-boxes/drop_down/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/drop_down/blank_option/index.html">Blank option</a><a href="/react-combo-boxes/drop_down/no_options/index.html">No options</a><a href="/react-combo-boxes/drop_down/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/drop_down/very_long_option/index.html">Very long option</a></details><details><summary>Drop down table</summary><a href="/react-combo-boxes/drop_down_table.html">About</a><a href="/react-combo-boxes/drop_down_table/drop_down/index.html">Table</a><a href="/react-combo-boxes/drop_down_table/drop_down_headers/index.html">With headers</a><a href="/react-combo-boxes/drop_down_table/drop_down_grouped/index.html">Grouped</a></details></details><details><summary>Radios</summary><a href="/react-combo-boxes/radios.html">About</a><a href="/react-combo-boxes/radios/string_options/index.html">String options</a><a href="/react-combo-boxes/radios/object_options/index.html">Object options</a><a href="/react-combo-boxes/radios/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/radios/with_description/index.html">With a description</a><a href="/react-combo-boxes/radios/grouped_options/index.html">Grouped options</a></details><details><summary>Checkboxes</summary><a href="/react-combo-boxes/checkboxes.html">About</a><a href="/react-combo-boxes/checkboxes/string_options/index.html">String options</a><a href="/react-combo-boxes/checkboxes/object_options/index.html">Object options</a><a href="/react-combo-boxes/checkboxes/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/checkboxes/with_description/index.html">With a description</a><a href="/react-combo-boxes/checkboxes/grouped_options/index.html">Grouped options</a></details><a href="/react-combo-boxes/datalist/index.html">Datalist</a><a href="/react-combo-boxes/test_helper.html">Test helper</a><a href="/react-combo-boxes/accessibility.html">Accessibility</a></nav><script src="/react-combo-boxes/index.c45c639b.js"></script><main><h1>Searching</h1> <p>The combo box will call an <code>onSearch</code> event when the user types a search term. The application should use this to filter the options provided to the combo box.</p> <p>You can handle this yourself, or some hooks have been provided for some common cases.</p> <p>A simple implementation to filter an array of strings would be:</p> <pre><code class="language-js"><span class="keyword token">const</span> <span class="punctuation token">[</span>value<span class="punctuation token">,</span> setValue<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">const</span> <span class="punctuation token">[</span>search<span class="punctuation token">,</span> setSearch<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> allOptions <span class="operator token">=</span> <span class="punctuation token">[</span><span class="string token">'Apple'</span><span class="punctuation token">,</span> <span class="string token">'Orange'</span><span class="punctuation token">,</span> <span class="string token">'Banana'</span><span class="punctuation token">]</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> options <span class="operator token">=</span> <span class="function token">useMemo</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="punctuation token">)</span> <span class="operator token">=></span> <span class="punctuation token">(</span>
  allOptions<span class="punctuation token">.</span><span class="function token">filter</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">value</span><span class="punctuation token">)</span> <span class="operator token">=></span> value<span class="punctuation token">.</span><span class="function token">toLowerCase</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">.</span><span class="function token">startsWith</span><span class="punctuation token">(</span>search<span class="punctuation token">.</span><span class="function token">toLowerCase</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">)</span>
<span class="punctuation token">)</span><span class="punctuation token">,</span> <span class="punctuation token">[</span>search<span class="punctuation token">]</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="operator token">&lt;</span>ComboBox
  value<span class="operator token">=</span><span class="punctuation token">{</span>value<span class="punctuation token">}</span>
  options<span class="operator token">=</span><span class="punctuation token">{</span>options<span class="punctuation token">}</span>
  onValue<span class="operator token">=</span><span class="punctuation token">{</span>setValue<span class="punctuation token">}</span>
  onSearch<span class="operator token">=</span><span class="punctuation token">{</span>setSearch<span class="punctuation token">}</span>
<span class="operator token">/</span><span class="operator token">></span>
</code></pre> <h2><code>useAsyncSearch(term: string, { searcher: Searcher, debounce: number, catchErrors: boolean = false })</code></h2> <p>This wraps a search function. It supports debouncing, catching errors and cancelling requests.</p> <p>Returns an array of <code>[results: any, busy: boolean, error: Error]</code></p> <ul> <li><code>results</code>: whatever the searcher returns</li> <li><code>busy</code>: true while searching, false while not searching</li> <li><code>error</code>: if <code>catchErrors</code> is true, a caught error will be set here.</li> </ul> <p>Options:</p> <ul> <li><code>searcher</code> (<code>async (search: string, { signal }: { signal: AbortSignal }) =&gt; any</code>) <strong>Required</strong>, a function to search. First argument is the query. Also passes the signal of an <code>AbortController</code> for cancelling requests.</li> <li><code>debounce</code> (<code>number</code>) milliseconds to debounce the search</li> <li><code>catchErrors</code> (<code>boolean</code>) if true, catch errors and return them as the third array argument.</li> </ul> <p>Example:</p> <pre><code class="language-javascript">
<span class="keyword token">const</span> <span class="punctuation token">[</span>value<span class="punctuation token">,</span> setValue<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="keyword token">const</span> <span class="punctuation token">[</span>search<span class="punctuation token">,</span> setSearch<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useState</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> searcher <span class="operator token">=</span> <span class="function token">useCallback</span><span class="punctuation token">(</span><span class="punctuation token">(</span><span class="parameter token">query<span class="punctuation token">,</span> <span class="punctuation token">{</span> signal <span class="punctuation token">}</span></span><span class="punctuation token">)</span> <span class="operator token">=></span> <span class="punctuation token">{</span>
  <span class="keyword token">if</span> <span class="punctuation token">(</span><span class="operator token">!</span>query<span class="punctuation token">)</span> <span class="punctuation token">{</span>
    <span class="keyword token">return</span> <span class="punctuation token">[</span><span class="punctuation token">]</span>
  <span class="punctuation token">}</span>
  <span class="keyword token">const</span> url <span class="operator token">=</span> <span class="keyword token">new</span> <span class="class-name token">URL</span><span class="punctuation token">(</span>apiUrl<span class="punctuation token">)</span><span class="punctuation token">;</span>
  url<span class="punctuation token">.</span>searchParams<span class="punctuation token">.</span><span class="function token">set</span><span class="punctuation token">(</span><span class="string token">'query'</span><span class="punctuation token">,</span> query<span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">const</span> response <span class="operator token">=</span> <span class="keyword token">await</span> <span class="function token">fetch</span><span class="punctuation token">(</span>url<span class="punctuation token">,</span> <span class="punctuation token">{</span> signal <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
  <span class="keyword token">return</span> <span class="keyword token">await</span> response<span class="punctuation token">.</span><span class="function token">json</span><span class="punctuation token">(</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
<span class="punctuation token">}</span><span class="punctuation token">,</span> <span class="punctuation token">[</span>apiUrl<span class="punctuation token">]</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="keyword token">const</span> <span class="punctuation token">[</span>options<span class="punctuation token">,</span> busy<span class="punctuation token">,</span> error<span class="punctuation token">]</span> <span class="operator token">=</span> <span class="function token">useSearch</span><span class="punctuation token">(</span>search<span class="punctuation token">,</span> <span class="punctuation token">{</span> searcher<span class="punctuation token">,</span> <span class="literal-property property token">catchErrors</span><span class="operator token">:</span> <span class="boolean token">true</span> <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>

<span class="operator token">&lt;</span>ComboBox
  value<span class="operator token">=</span><span class="punctuation token">{</span>value<span class="punctuation token">}</span>
  options<span class="operator token">=</span><span class="punctuation token">{</span>options<span class="punctuation token">}</span>
  busy<span class="operator token">=</span><span class="punctuation token">{</span>busy<span class="punctuation token">}</span>
  onValue<span class="operator token">=</span><span class="punctuation token">{</span>setValue<span class="punctuation token">}</span>
  onSearch<span class="operator token">=</span><span class="punctuation token">{</span>setSearch<span class="punctuation token">}</span>
<span class="operator token">/</span><span class="operator token">></span>
</code></pre> <h2><code>useTokenSearch(query, { options, index, tokenise, minLength, maxResults })</code></h2> <pre><code class="language-javascript"><span class="keyword token">const</span> filteredOptions <span class="operator token">=</span> <span class="function token">useTokenSearch</span><span class="punctuation token">(</span>query<span class="punctuation token">,</span> <span class="punctuation token">{</span> options <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>Searches an array of options. The options are split into words. When searching any options containing a word starting with the search term will be returned.</p> <p>By default it will search either strings, or <code>label</code> property if the options are objects.</p> <p>You can customise how the array indexed by providing an index function with the signature <code>function (option: Object): Array&lt;String&gt;</code>.</p> <p>The tokeniser can also be replaced. This is function with the signature <code>function (string: String): Array&lt;String&gt;</code></p> <h2><code>usePrefixSearch(query, { options, index, minLength, maxResults })</code></h2> <pre><code class="language-javascript"><span class="keyword token">const</span> filteredOptions <span class="operator token">=</span> <span class="function token">usePrefixSearch</span><span class="punctuation token">(</span>query<span class="punctuation token">,</span> <span class="punctuation token">{</span> options <span class="punctuation token">}</span><span class="punctuation token">)</span><span class="punctuation token">;</span>
</code></pre> <p>Searches an array of options for a matching prefix. This will find options starting with the search term.</p> <p>By default it will search either strings, or <code>label</code> property if the options are objects.</p> <p>You can customise how the array indexed by providing an index function with the signature <code>function (option: Object): Array&lt;String&gt;</code>.</p> </main><footer><p>Version: 3.0.2</p></footer><script src="/react-combo-boxes/index.db27fff3.js" type="module"></script></body></html>