<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Highlighters</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/react-combo-boxes/styles.0ea2f681.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=default%2Ces2018%2Ces2015%2Ces2016%2Ces2017%2Ces2019%2CNodeList.prototype.forEach" crossorigin="anonymous"></script></head><body><nav><div>React combo boxes</div><details><summary>Select</summary><a href="/react-combo-boxes/select.html">About</a><a href="/react-combo-boxes/select/string_options/index.html">String options</a><a href="/react-combo-boxes/select/object_options/index.html">Object options</a><a href="/react-combo-boxes/select/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/select/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/select/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/select/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/select/html_options/index.html">HTML options</a><a href="/react-combo-boxes/select/very_long_option/index.html">Very long option</a></details><details><summary>Combo box</summary><a href="/react-combo-boxes/combo_box.html">About</a><a href="/react-combo-boxes/combo_box/string_options/index.html">String options</a><a href="/react-combo-boxes/combo_box/object_options/index.html">Object options</a><a href="/react-combo-boxes/combo_box/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/combo_box/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/combo_box/html_options/index.html">HTML options</a><a href="/react-combo-boxes/combo_box/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/combo_box/without_autocomplete/index.html">Without autocomplete</a><a href="/react-combo-boxes/combo_box/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/combo_box/inline_autocomplete/index.html">With inline autocomplete</a><a href="/react-combo-boxes/combo_box/aria_1_1/index.html">ARIA 1.1</a><a href="/react-combo-boxes/combo_box/aria_1_2/index.html">ARIA 1.2</a><a href="/react-combo-boxes/combo_box/aria_1_2_groups/index.html">ARIA 1.2 groups</a><a href="/react-combo-boxes/combo_box/listbox_footer/index.html">Listbox footer</a><a href="/react-combo-boxes/combo_box/tab_select/index.html">Tab select</a><details><summary>Searches</summary><a href="/react-combo-boxes/searchers.html">About</a><a href="/react-combo-boxes/combo_box/fetch/index.html">Fetch search</a><a href="/react-combo-boxes/combo_box/async_search/index.html">Async search</a><a href="/react-combo-boxes/combo_box/search_suggestions/index.html">Search suggestions</a><a href="/react-combo-boxes/combo_box/background_autocomplete/index.html">With background autocomplete</a></details><details><summary>Edge cases</summary><a href="/react-combo-boxes/combo_box/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/combo_box/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/combo_box/autoselect_disabled_option/index.html">Disabled option and autoselect</a><a href="/react-combo-boxes/combo_box/search_min_length/index.html">Search min length</a><a href="/react-combo-boxes/combo_box/very_long_option/index.html">Very long option</a></details><details><summary>Combo box table</summary><a href="/react-combo-boxes/combo_box_table.html">About</a><a href="/react-combo-boxes/combo_box_table/combo_box/index.html">Table</a><a href="/react-combo-boxes/combo_box_table/combo_box_headers/index.html">With headers</a><a href="/react-combo-boxes/combo_box_table/combo_box_grouped/index.html">Grouped</a><a href="/react-combo-boxes/combo_box_table/combo_box_column_width/index.html">Column width adjustment</a></details></details><details><summary>Drop down</summary><a href="/react-combo-boxes/drop_down.html">About</a><a href="/react-combo-boxes/drop_down/string_options/index.html">String options</a><a href="/react-combo-boxes/drop_down/object_options/index.html">Object options</a><a href="/react-combo-boxes/drop_down/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/drop_down/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/drop_down/disabled/index.html">Disabled drop down</a><a href="/react-combo-boxes/drop_down/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/drop_down/html_options/index.html">HTML options</a><a href="/react-combo-boxes/drop_down/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/drop_down/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/drop_down/aria_1_2_groups/index.html">With ARIA 1.2 groups</a><details><summary>Edge cases</summary><a href="/react-combo-boxes/drop_down/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/drop_down/no_options/index.html">No options</a><a href="/react-combo-boxes/drop_down/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/drop_down/very_long_option/index.html">Very long option</a></details><details><summary>Drop down table</summary><a href="/react-combo-boxes/drop_down_table.html">About</a><a href="/react-combo-boxes/drop_down_table/drop_down/index.html">Table</a><a href="/react-combo-boxes/drop_down_table/drop_down_headers/index.html">With headers</a><a href="/react-combo-boxes/drop_down_table/drop_down_grouped/index.html">Grouped</a></details></details><a href="/react-combo-boxes/test_helper.html">Test helper</a><a href="/react-combo-boxes/accessibility.html">Accessibility</a><a href="/react-combo-boxes/datalist/index.html">Datalist</a></nav><script src="/react-combo-boxes/side_collapse.da5ebe24.js"></script><main><h1 id="highlighters">Highlighters</h1>
<p>Highlighters can be used to highlight which parts of the search results match the search term.</p>
<pre><code class="language-js"><span class="token comment">// Example that will highlight a token search</span>

<span class="token keyword">const</span> <span class="token punctuation">[</span>options<span class="token punctuation">,</span> onSearch<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token function">useTokenSearch</span><span class="token punctuation">(</span>initialOptions<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token operator">&lt;</span>ComboBox
  options<span class="token operator">=</span><span class="token punctuation">{</span>options<span class="token punctuation">}</span>
  onSearch<span class="token operator">=</span><span class="token punctuation">{</span>onSearch<span class="token punctuation">}</span>
  renderValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">tokenHighlight</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>Five highlights are provided, or you could build your own.</p>
<p>All highlights also support an inverse option. This is useful for highlighting search suggestions.</p>
<pre><code class="language-js"><span class="token operator">&lt;</span>ComboBox
  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>
  renderValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">tokenHighlight</span><span class="token punctuation">(</span><span class="token punctuation">{</span> inverse<span class="token operator">:</span> <span class="token boolean">true</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<h2 id="delimitedhighlight"><code>delimitedHighlight</code></h2>
<p>Adds highlighting to a string that already contains delimiters marking the highlight.</p>
<p>For example elastic search will return highlighted strings that look like:
<code>foo &lt;em&gt;bar&lt;/em&gt;</code>.</p>
<p>You need to pass the start and end delimiters to the highlight.</p>
<p>Example: <code>foo &lt;em&gt;bar&lt;/em&gt;</code> =&gt; &quot;foo <strong>bar</strong>&quot;</p>
<pre><code class="language-js"><span class="token operator">&lt;</span>ComboBox
  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>
  renderValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">delimitedHighlight</span><span class="token punctuation">(</span><span class="token punctuation">{</span> start<span class="token operator">:</span> <span class="token string">'&lt;em>'</span><span class="token punctuation">,</span> end<span class="token operator">:</span> <span class="token string">'&lt;/em>'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<h2 id="passthroughhightlight"><code>passThroughHightlight</code></h2>
<p>This passes the input through without highlighting anything.</p>
<p>This has no practical use.</p>
<h2 id="prefixhighlight"><code>prefixHighlight</code></h2>
<p>Highlights where the search term appears at the start of the string.</p>
<p>Left trims and matches case insensitively.</p>
<p>Example: highlight &quot;foo&quot; in <code>foo bar foo</code> =&gt; &quot;<strong>foo</strong> bar foo&quot;</p>
<h2 id="substringhighlight"><code>substringHighlight</code></h2>
<p>Highlights where the search term matches part of a string.</p>
<p>Left trims and matches case insensitively.</p>
<p>Useful for highlighting a database ilike query.</p>
<p>Example: highlight &quot;foo&quot; in <code>barfoo</code> =&gt; &quot;bar<strong>foo</strong>&quot;</p>
<h2 id="tokenhighlight"><code>tokenHighlight</code></h2>
<p>Highlights matching tokens from a token search.</p>
<p>Example: highlight &quot;foo&quot; in <code>barfoo foobar</code> =&gt; &quot;barfoo <strong>foo</strong>bar&quot;</p>
<h2 id="custom-highlighters-and-highlightvalue">Custom highlighters and <code>highlightValue</code></h2>
<p>To create your own highlighter you need to create a method with the following signature:</p>
<p><code>(term: string, query: string, options: Any, state: Object, props: Object): Array&lt;string | Array&lt;string&gt;&gt;,</code></p>
<ul>
<li><code>term</code> The term to highlight</li>
<li><code>query</code> The search query to highlight with</li>
<li><code>options</code> Any additional props passed to the component</li>
<li><code>state</code> The state of the component for that value</li>
<li><code>props</code> The props passed to component</li>
</ul>
<p>This should return an array whose members are strings or a single item array. For example:</p>
<p><code>foo&lt;mark&gt;bar&lt;/mark&gt; foe</code> would be represented as <code>[&#39;foo&#39;, [&#39;bar&#39;], &#39; foe&#39;]</code></p>
<p>You can pass this highlighter to <code>highlightValue</code>.</p>
<pre><code class="language-javascript"><span class="token operator">&lt;</span>ComboBox
  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>
  renderValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">highlightValue</span><span class="token punctuation">(</span>myCustomHighlighter<span class="token punctuation">,</span>  <span class="token punctuation">{</span> any<span class="token operator">:</span> <span class="token string">'options'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
<p>You can compose a highlighter using the existing highlighters. They are:</p>
<ul>
<li><code>delimitedHighlighter</code></li>
<li><code>passThroughHighlighter</code></li>
<li><code>tokenHighlighter</code></li>
<li><code>prefixHighligher</code></li>
<li><code>substringHighlighter</code></li>
<li><code>tokenHighlighter</code></li>
</ul>
<pre><code class="language-javascript"><span class="token keyword">import</span> <span class="token punctuation">{</span> tokenHighlighter<span class="token punctuation">,</span> passThoughHighlighter <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@citizensadvice/react-combo-boxes'</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">highlight</span><span class="token punctuation">(</span><span class="token parameter">term<span class="token punctuation">,</span> search<span class="token punctuation">,</span> options<span class="token punctuation">,</span> state<span class="token punctuation">,</span> props</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// If the term is foo highlight</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>term <span class="token operator">===</span> <span class="token string">'foo'</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">tokenHighlighter</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token comment">// Otherwise don't highlight</span>
  <span class="token keyword">return</span> <span class="token function">passThroughHighlighter</span><span class="token punctuation">(</span><span class="token operator">...</span>arguments<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token operator">&lt;</span>ComboBox
  <span class="token punctuation">{</span><span class="token operator">...</span>props<span class="token punctuation">}</span>
  renderValue<span class="token operator">=</span><span class="token punctuation">{</span><span class="token function">highlightValue</span><span class="token punctuation">(</span>highlight<span class="token punctuation">)</span><span class="token punctuation">}</span>
<span class="token operator">/</span><span class="token operator">></span>
</code></pre>
</main><script src="/react-combo-boxes/render.bbf38e6e.js"></script></body></html>