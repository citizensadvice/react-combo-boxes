<!DOCTYPE html><html lang="en-GB"><head><meta charset="utf-8"><title>Test helper</title><meta name="viewport" content="width=device-width, initial-scale=1"><link rel="stylesheet" href="/react-combo-boxes/styles.0ea2f681.css"><script src="https://polyfill.io/v3/polyfill.min.js?features=default%2Ces2018%2Ces2015%2Ces2016%2Ces2017%2Ces2019%2CNodeList.prototype.forEach" crossorigin="anonymous"></script></head><body><nav><div>React combo boxes</div><details><summary>Select</summary><a href="/react-combo-boxes/select.html">About</a><a href="/react-combo-boxes/select/string_options/index.html">String options</a><a href="/react-combo-boxes/select/object_options/index.html">Object options</a><a href="/react-combo-boxes/select/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/select/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/select/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/select/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/select/html_options/index.html">HTML options</a><a href="/react-combo-boxes/select/very_long_option/index.html">Very long option</a></details><details><summary>Combo box</summary><a href="/react-combo-boxes/combo_box.html">About</a><a href="/react-combo-boxes/combo_box/string_options/index.html">String options</a><a href="/react-combo-boxes/combo_box/object_options/index.html">Object options</a><a href="/react-combo-boxes/combo_box/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/combo_box/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/combo_box/html_options/index.html">HTML options</a><a href="/react-combo-boxes/combo_box/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/combo_box/without_autocomplete/index.html">Without autocomplete</a><a href="/react-combo-boxes/combo_box/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/combo_box/inline_autocomplete/index.html">With inline autocomplete</a><a href="/react-combo-boxes/combo_box/aria_1_1/index.html">ARIA 1.1</a><a href="/react-combo-boxes/combo_box/aria_1_2/index.html">ARIA 1.2</a><a href="/react-combo-boxes/combo_box/aria_1_2_groups/index.html">ARIA 1.2 groups</a><a href="/react-combo-boxes/combo_box/listbox_footer/index.html">Listbox footer</a><a href="/react-combo-boxes/combo_box/tab_select/index.html">Tab select</a><details><summary>Searches</summary><a href="/react-combo-boxes/searchers.html">About</a><a href="/react-combo-boxes/combo_box/fetch/index.html">Fetch search</a><a href="/react-combo-boxes/combo_box/async_search/index.html">Async search</a><a href="/react-combo-boxes/combo_box/search_suggestions/index.html">Search suggestions</a><a href="/react-combo-boxes/combo_box/background_autocomplete/index.html">With background autocomplete</a></details><details><summary>Edge cases</summary><a href="/react-combo-boxes/combo_box/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/combo_box/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/combo_box/autoselect_disabled_option/index.html">Disabled option and autoselect</a><a href="/react-combo-boxes/combo_box/search_min_length/index.html">Search min length</a><a href="/react-combo-boxes/combo_box/very_long_option/index.html">Very long option</a></details><details><summary>Combo box table</summary><a href="/react-combo-boxes/combo_box_table.html">About</a><a href="/react-combo-boxes/combo_box_table/combo_box/index.html">Table</a><a href="/react-combo-boxes/combo_box_table/combo_box_headers/index.html">With headers</a><a href="/react-combo-boxes/combo_box_table/combo_box_grouped/index.html">Grouped</a><a href="/react-combo-boxes/combo_box_table/combo_box_column_width/index.html">Column width adjustment</a></details></details><details><summary>Drop down</summary><a href="/react-combo-boxes/drop_down.html">About</a><a href="/react-combo-boxes/drop_down/string_options/index.html">String options</a><a href="/react-combo-boxes/drop_down/object_options/index.html">Object options</a><a href="/react-combo-boxes/drop_down/placeholder_option/index.html">Placeholder option</a><a href="/react-combo-boxes/drop_down/disabled_option/index.html">Disabled option</a><a href="/react-combo-boxes/drop_down/disabled/index.html">Disabled drop down</a><a href="/react-combo-boxes/drop_down/grouped_options/index.html">Grouped options</a><a href="/react-combo-boxes/drop_down/html_options/index.html">HTML options</a><a href="/react-combo-boxes/drop_down/mapped_options/index.html">Mapped options</a><a href="/react-combo-boxes/drop_down/without_managed_focus/index.html">Without managed focus</a><a href="/react-combo-boxes/drop_down/aria_1_2_groups/index.html">With ARIA 1.2 groups</a><details><summary>Edge cases</summary><a href="/react-combo-boxes/drop_down/identical_options/index.html">Identical options</a><a href="/react-combo-boxes/drop_down/no_options/index.html">No options</a><a href="/react-combo-boxes/drop_down/all_disabled_options/index.html">All disabled options</a><a href="/react-combo-boxes/drop_down/very_long_option/index.html">Very long option</a></details><details><summary>Drop down table</summary><a href="/react-combo-boxes/drop_down_table.html">About</a><a href="/react-combo-boxes/drop_down_table/drop_down/index.html">Table</a><a href="/react-combo-boxes/drop_down_table/drop_down_headers/index.html">With headers</a><a href="/react-combo-boxes/drop_down_table/drop_down_grouped/index.html">Grouped</a></details></details><a>Test helper</a><a href="/react-combo-boxes/accessibility.html">Accessibility</a><a href="/react-combo-boxes/datalist/index.html">Datalist</a></nav><script src="/react-combo-boxes/side_collapse.da5ebe24.js"></script><main><h1 id="test-helper">Test helper</h1>
<p>This helpers lets you select an option from a combo-box using <a href="https://testing-library.com/">Testing Library</a>
and requires <code>@testing-libaray/react</code>;</p>
<pre><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> selectComboBoxOption <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@citizensadvice/react-combo-boxes/spec-helpers'</span><span class="token punctuation">;</span>

<span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'a test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'helps select a combo box option'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">await</span> <span class="token function">selectComboBoxOption</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token keyword">from</span><span class="token operator">:</span> <span class="token string">'My label'</span><span class="token punctuation">,</span> searchFor<span class="token operator">:</span> <span class="token string">'Foo'</span><span class="token punctuation">,</span> select<span class="token operator">:</span> <span class="token string">'Bar'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
<p><code>selectComboBoxOption({ from, searchFor, select })</code></p>
<ul>
<li><code>from: string | RegExp | Object</code> - The name for the combo-box, or an object if you want to specify more <a href="https://testing-library.com/docs/dom-testing-library/api-queries#byrole">findByRole options</a></li>
<li><code>searchFor: string</code> - optional - text to be typed into the combo box</li>
<li><code>select: string | RegExp | Object</code> - The name of the option, or an object if you want to specify more <a href="https://testing-library.com/docs/dom-testing-library/api-queries#byrole">findByRole options</a></li>
<li><code>container: React.ReactNode</code> - optional - The container to search in. Defaults to <code>document.body</code></li>
</ul>
<h2 id="clearing-an-option">Clearing an option</h2>
<p>If you want to clear an option you can use <a href="https://github.com/testing-library/user-event#clearelement"><code>userEvent.clear</code></a></p>
<pre><code class="language-js"><span class="token function">describe</span><span class="token punctuation">(</span><span class="token string">'a test'</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'clears a combo box option'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    userEvent<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token function">findByRole</span><span class="token punctuation">(</span><span class="token string">'combobox'</span><span class="token punctuation">,</span> <span class="token punctuation">{</span> name<span class="token operator">:</span> <span class="token string">'My label'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// The update is async so wait for a change</span>
    <span class="token keyword">await</span>  <span class="token function">waitFor</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token function">expect</span><span class="token punctuation">(</span>something<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toHappen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre>
</main><script src="/react-combo-boxes/render.72893422.js"></script></body></html>